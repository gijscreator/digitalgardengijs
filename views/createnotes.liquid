{% render 'partials/head.liquid' %}
<main class="createnote">
    <section>
        {% if isEditing %}
            <h2>Pruning Note: {{ note.title }}</h2>
        {% else %}
            <h2>Write a note</h2>
        {% endif %}

        <form action="{% if isEditing %}/api/notes/update/{{ note.id }}{% else %}/api/notes{% endif %}" 
            method="POST" 
            >
            <fieldset>
                <div>
                    <label for="Topic">Topic</label>
                    <input type="text" name="topic" value="{{ note.topic }}" placeholder="Topic (e.g., Coding, UX)">
                </div>

                <div>
                    <label for="category">Category</label>
                    <select name="category">
                        <option value="general" {% if note.category == 'general' %}selected{% endif %}>General</option>
                        <option value="idea" {% if note.category == 'idea' %}selected{% endif %}>Idea</option>
                        <option value="quick note" {% if note.category == 'quick note' %}selected{% endif %}>Quick note</option>
                        <option value="lesson note" {% if note.category == 'lesson note' %}selected{% endif %}>Lesson note</option>
                        <option value="we love web" {% if note.category == 'we love web' %}selected{% endif %}>We love web</option>
                    </select>
                </div>

                <div>
                    <label for="title">Title</label>
                    <input type="text" name="title" value="{{ note.title }}" placeholder="Title" required>
                </div>
                
                <div>
                    <label for="content">Content</label>
                    <textarea name="content" placeholder="Your notes..." required>{{ note.content }}</textarea>
                </div>

                <div>
                    <label for="external_url">Link</label>
                    <input type="url" name="external_url" value="{{ note.external_url }}" placeholder="Primary Link (https://...)">
                </div>

                <div>
                    <label for="additional_links">Additional links</label>
                    <textarea name="additional_links" placeholder="Additional links...">{{ note.additional_links }}</textarea>
                </div>

                <div>
                    <label for="attachment">Attachment</label>
                    {% if isEditing and note.file_url %}
                        <p style="font-size: 0.8rem;">Current file: {{ note.file_url }}</p>
                    {% endif %}
                    <input type="file" name="attachment">
                </div>

                <button type="submit">
                    {% if isEditing %}Update Note{% else %}Plant in Garden{% endif %}
                </button>
                
            </fieldset>
        </form>
    </section>
</main>