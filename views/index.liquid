{% render 'partials/head.liquid' %}
<main class="home">

    {% comment %} Section with filters and sorts {% endcomment %}
    <section>
        <nav class="garden-nav">
            <article class="filter-group">
                <h2>Filter</h2>
                <ul>
                    <li><a class="badge {% if selectedCategory == 'all' %}active{% endif %}" href="/?category=all">All</a></li>
                    <li><a class="badge {% if selectedCategory == 'general' %}active{% endif %}" href="/?category=general">General</a></li>
                    <li><a class="badge {% if selectedCategory == 'idea' %}active{% endif %}" href="/?category=idea">Idea</a></li>
                    <li><a class="badge {% if selectedCategory == 'quick note' %}active{% endif %}" href="/?category=quick%20note">Quick Note</a></li>
                    <li><a class="badge {% if selectedCategory == 'lesson note' %}active{% endif %}" href="/?category=lesson%20note">Lesson Note</a></li>
                    <li><a class="badge {% if selectedCategory == 'we love web' %}active{% endif %}" href="/?category=we%20love%20web">We Love Web</a></li>
                </ul>
            </article>

            <article class="sort-group">
                <h2>Sort:</h2>
                <ul>
                    <li><a class="badge" href="/?sort=newest&category={{ selectedCategory }}">Newest</a></li>
                    <li><a class="badge" href="/?sort=oldest&category={{ selectedCategory }}">Oldest</a></li>
                </ul>
            </article>
        </nav>
    </section>

    {% comment %} Notes results {% endcomment %}
    <section>
        <ul>
        {% for note in notes %}
            <li>
                <article>
                    <div class="badges">
                        <span class="badge">{{ note.category }}</span>
                        <span class="badge">#{{ note.topic }}</span>
                    </div>
                    <h3>{{ note.title }}</h3>
                </article>

                {% if note.file_url %}
                    <div class="attachment">
                    {% if note.file_url contains '.pdf' %}
                        <a href="{{ note.file_url }}" target="_blank">ðŸ“„ View PDF Document</a>
                    {% else %}
                        <img src="{{ note.file_url }}" alt="Note Image">
                    {% endif %}
                    </div>
                {% endif %}

                <p>{{ note.content | truncatewords: 10 }}</p>
                <a href="/note/{{ note.id }}">Read more</a>

                {% if note.external_url %}
                    <a href="/note/{{ note.id }}">
                    <a href="{{ note.external_url }}" target="_blank" > Source Link </a>
                {% endif %}

                {% if note.additional_links %}
                    <div class="extra-links">
                    <strong>More resources:</strong>
                    {{ note.additional_links | newline_to_br }}
                    </div>
                {% endif %}
                
                <footer>{{ note.created_at | date: "%b %d, %Y" }}</footer>
            </li>
        {% endfor %}
        </ul>
    </section>

</main>


</body>

</html>